<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profil - HaditsKu</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Amiri:wght@400;700&display=swap" rel="stylesheet">
    <link rel="website icon" type="png" href="alquran.png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.12/cropper.min.css">
    <style>
        :root {
            --primary: #0d6e6e;
            --primary-light: rgba(13, 110, 110, 0.1);
            --primary-dark: #0a4f4f;
            --secondary: #d6ccb5;
            --accent: #f5c361;
            --dark: #1e2a3a;
            --light: #f8f8f6;
            --gray: #718096;
            --arabic-font: 'Amiri', serif;
            
            /* Dark mode variables */
            --dark-bg: #121212;
            --dark-card: #1e1e1e;
            --dark-text: #e0e0e0;
            --dark-border: #333;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--light);
            color: var(--dark);
            line-height: 1.6;
            padding-bottom: 60px;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        body.dark-mode {
            background-color: var(--dark-bg);
            color: var(--dark-text);
        }

        /* Header */
        .header {
            display: flex;
            align-items: center;
            padding: 12px 15px;
            background-color: white;
            box-shadow: 0 2px 15px rgba(0,0,0,0.08);
            position: sticky;
            top: 0;
            z-index: 100;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        body.dark-mode .header {
            background-color: var(--dark-card);
            box-shadow: 0 2px 15px rgba(0,0,0,0.2);
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .logo-icon {
            color: var(--primary);
            font-size: 1.5rem;
            transition: transform 0.3s ease;
        }

        .logo:hover .logo-icon {
            transform: scale(1.1);
        }

        .logo-text h1 {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--primary);
            background: linear-gradient(to right, var(--primary), var(--primary-dark));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            transition: all 0.3s ease;
        }

        .theme-toggle {
            background: none;
            border: none;
            color: var(--dark);
            font-size: 1.1rem;
            margin-left: auto;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        body.dark-mode .theme-toggle {
            color: var(--dark-text);
        }

        .theme-toggle:hover {
            transform: scale(1.1) rotate(15deg);
            color: var(--accent);
        }

        /* Main Content */
        .main {
            padding: 15px;
        }

        .profile-header {
            text-align: center;
            margin-bottom: 25px;
        }

        .profile-avatar {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            object-fit: cover;
            border: 3px solid var(--primary);
            margin: 0 auto 15px;
            box-shadow: 0 4px 15px rgba(13, 110, 110, 0.2);
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .profile-avatar:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 20px rgba(13, 110, 110, 0.3);
        }

        .profile-name {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 5px;
        }

        .profile-email {
            color: var(--gray);
            font-size: 0.9rem;
        }

        /* Profile Stats */
        .profile-stats {
            display: flex;
            justify-content: space-around;
            background-color: white;
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 20px;
            box-shadow: 0 3px 12px rgba(0,0,0,0.08);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        body.dark-mode .profile-stats {
            background-color: var(--dark-card);
        }

        .stat-item {
            text-align: center;
        }

        .stat-number {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--primary);
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 0.8rem;
            color: var(--gray);
        }

        /* Settings Section */
        .settings-section {
            margin-bottom: 25px;
        }

        .section-title {
            font-size: 1.1rem;
            font-weight: 500;
            margin-bottom: 15px;
            padding-left: 10px;
            border-left: 3px solid var(--primary);
        }

        .settings-list {
            background-color: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 3px 12px rgba(0,0,0,0.08);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        body.dark-mode .settings-list {
            background-color: var(--dark-card);
        }

        .setting-item {
            display: flex;
            align-items: center;
            padding: 15px;
            border-bottom: 1px solid rgba(0,0,0,0.05);
            transition: all 0.3s ease;
            cursor: pointer;
        }

        body.dark-mode .setting-item {
            border-bottom-color: var(--dark-border);
        }

        .setting-item:last-child {
            border-bottom: none;
        }

        .setting-item:hover {
            background-color: var(--primary-light);
        }

        .setting-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: var(--primary-light);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            color: var(--primary);
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .setting-item:hover .setting-icon {
            background-color: var(--primary);
            color: white;
        }

        .setting-info {
            flex: 1;
        }

        .setting-title {
            font-size: 0.95rem;
            font-weight: 500;
            margin-bottom: 3px;
        }

        .setting-desc {
            font-size: 0.8rem;
            color: var(--gray);
        }

        .setting-arrow {
            color: var(--gray);
            font-size: 0.9rem;
        }

        /* Switch Toggle */
        .switch {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 24px;
        }

        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 24px;
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 16px;
            width: 16px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }

        input:checked + .slider {
            background-color: var(--primary);
        }

        input:checked + .slider:before {
            transform: translateX(26px);
        }

        /* Logout Button */
        .logout-btn {
            display: block;
            width: 100%;
            padding: 12px;
            background-color: #f8f8f6;
            border: none;
            border-radius: 12px;
            color: #e74c3c;
            font-weight: 500;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 3px 12px rgba(0,0,0,0.08);
            margin-top: 20px;
        }

        body.dark-mode .logout-btn {
            background-color: #2d2d2d;
        }

        .logout-btn:hover {
            background-color: #e74c3c;
            color: white;
            transform: translateY(-2px);
        }

        /* Bottom Navigation */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background-color: white;
            display: flex;
            justify-content: space-around;
            padding: 10px 0;
            box-shadow: 0 -2px 15px rgba(0,0,0,0.08);
            z-index: 90;
            transform: translateY(0);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        body.dark-mode .bottom-nav {
            background-color: var(--dark-card);
            box-shadow: 0 -2px 15px rgba(0,0,0,0.2);
        }

        .bottom-nav.hidden {
            transform: translateY(100%);
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-decoration: none;
            color: var(--gray);
            font-size: 0.75rem;
            padding: 5px 10px;
            border-radius: 8px;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .nav-item i {
            font-size: 1.2rem;
            margin-bottom: 3px;
            transition: all 0.3s ease;
        }

        .nav-item.active {
            color: var(--primary);
            background-color: var(--primary-light);
            transform: translateY(-5px);
        }

        .nav-item:not(.active):hover {
            color: var(--primary);
            transform: translateY(-2px);
        }

        .nav-item.active i {
            color: var(--primary);
            transform: scale(1.1);
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            z-index: 200;
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background-color: white;
            width: 90%;
            max-width: 400px;
            border-radius: 12px;
            overflow: hidden;
            animation: modalFadeIn 0.3s ease-out;
        }

        body.dark-mode .modal-content {
            background-color: var(--dark-card);
        }

        @keyframes modalFadeIn {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .modal-header {
            padding: 15px;
            border-bottom: 1px solid rgba(0,0,0,0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        body.dark-mode .modal-header {
            border-bottom-color: var(--dark-border);
        }

        .modal-title {
            font-weight: 600;
            font-size: 1.1rem;
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 1.2rem;
            cursor: pointer;
            color: var(--gray);
        }

        .modal-body {
            padding: 20px;
        }

        .modal-footer {
            padding: 15px;
            display: flex;
            justify-content: flex-end;
            gap: 10px;
            border-top: 1px solid rgba(0,0,0,0.1);
        }

        body.dark-mode .modal-footer {
            border-top-color: var(--dark-border);
        }

        .btn {
            padding: 8px 16px;
            border-radius: 8px;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background-color: var(--primary);
            color: white;
            border: none;
        }

        .btn-primary:hover {
            background-color: var(--primary-dark);
        }

        .btn-outline {
            background-color: transparent;
            border: 1px solid var(--gray);
            color: var(--gray);
        }

        .btn-outline:hover {
            border-color: var(--primary);
            color: var(--primary);
        }

        /* Form Styles */
        .form-group {
            margin-bottom: 15px;
        }

        .form-label {
            display: block;
            margin-bottom: 5px;
            font-size: 0.9rem;
        }

        .form-control {
            width: 100%;
            padding: 10px 15px;
            border: 1px solid rgba(0,0,0,0.1);
            border-radius: 8px;
            font-size: 0.9rem;
            transition: all 0.3s ease;
        }

        body.dark-mode .form-control {
            background-color: var(--dark-bg);
            border-color: var(--dark-border);
            color: var(--dark-text);
        }

        .form-control:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 2px var(--primary-light);
        }

        /* Style untuk preview foto profil */
        .avatar-preview {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            object-fit: cover;
            border: 3px solid var(--primary);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .avatar-preview:hover {
            transform: scale(1.05);
            opacity: 0.8;
        }

        /* Style untuk container upload foto */
        .upload-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
        }

        /* Style tersembunyi untuk input file */
        .hidden-file-input {
            display: none;
        }

        /* Style untuk tombol upload */
        .upload-btn {
            background-color: var(--primary-light);
            color: var(--primary);
            border: 1px dashed var(--primary);
            padding: 8px 15px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            font-size: 0.9rem;
        }

        .upload-btn:hover {
            background-color: var(--primary);
            color: white;
        }

        /* Style untuk cropper container */
        .cropper-container {
            max-height: 60vh;
            margin-bottom: 15px;
        }

        /* Responsive */
        @media (min-width: 768px) {
            .profile-header {
                margin-bottom: 30px;
            }
            
            .profile-avatar {
                width: 120px;
                height: 120px;
            }
            
            .profile-name {
                font-size: 1.5rem;
            }

            .avatar-preview {
                width: 120px;
                height: 120px;
            }
        }
        
        .copyright {
            text-align: center;
            padding-top: 2rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            font-size: 0.9rem;
            color: #aaa;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="logo">
            <i class="fas fa-mosque logo-icon"></i>
            <div class="logo-text">
                <h1>HaditsKu</h1>
            </div>
        </div>
        <button class="theme-toggle" id="themeToggle">
            <i class="fas fa-moon"></i>
        </button>
    </header>

    <!-- Main Content -->
    <main class="main">
        <!-- Profile Header -->
        <div class="profile-header">
            <img src="https://ui-avatars.com/api/?name=User+Name&background=0d6e6e&color=fff&size=128" alt="Profile" class="profile-avatar" id="profileAvatar">
            <h2 class="profile-name" id="profileName">User Hadistku</h2>
            <p class="profile-email" id="profileEmail">user@hadistku.com</p>
        </div>

        <!-- Profile Stats -->
        <div class="profile-stats">
            <div class="stat-item">
                <div class="stat-number">?</div>
                <div class="stat-label">Hadits Dibaca</div>
            </div>
            <div class="stat-item">
                <div class="stat-number">?</div>
                <div class="stat-label">Favorit</div>
            </div>
            <div class="stat-item">
                <div class="stat-number">?</div>
                <div class="stat-label">Kitab</div>
            </div>
        </div>

        <!-- Account Settings -->
        <div class="settings-section">
            <h3 class="section-title">Akun Saya</h3>
            <div class="settings-list">
                <div class="setting-item" id="editProfileBtn">
                    <div class="setting-icon">
                        <i class="fas fa-user-edit"></i>
                    </div>
                    <div class="setting-info">
                        <div class="setting-title">Edit Profil</div>
                        <div class="setting-desc">Ubah nama, foto, dan informasi lainnya</div>
                    </div>
                    <i class="fas fa-chevron-right setting-arrow"></i>
                </div>
            </div>
        </div>

        <!-- App Settings -->
        <div class="settings-section">
            <h3 class="section-title">Pengaturan Aplikasi</h3>
            <div class="settings-list">
                <div class="setting-item">
                    <div class="setting-icon">
                        <i class="fas fa-moon"></i>
                    </div>
                    <div class="setting-info">
                        <div class="setting-title">Mode Gelap</div>
                        <div class="setting-desc">Aktifkan tampilan dark mode</div>
                    </div>
                    <label class="switch">
                        <input type="checkbox" id="darkModeToggle">
                        <span class="slider"></span>
                    </label>
                </div>
                <div class="setting-item">
                    <div class="setting-icon">
                        <i class="fas fa-bell"></i>
                    </div>
                    <div class="setting-info">
                        <div class="setting-title">Notifikasi</div>
                        <div class="setting-desc">Aktifkan pemberitahuan harian</div>
                    </div>
                    <label class="switch">
                        <input type="checkbox" id="notifToggle" checked>
                        <span class="slider"></span>
                    </label>
                </div>
                <div class="setting-item" id="languageSetting">
                    <div class="setting-icon">
                        <i class="fas fa-language"></i>
                    </div>
                    <div class="setting-info">
                        <div class="setting-title">Bahasa</div>
                        <div class="setting-desc">Pilih bahasa aplikasi</div>
                    </div>
                    <i class="fas fa-chevron-right setting-arrow"></i>
                </div>
                <div class="setting-item" id="fontSetting">
                    <div class="setting-icon">
                        <i class="fas fa-font"></i>
                    </div>
                    <div class="setting-info">
                        <div class="setting-title">Ukuran Teks</div>
                        <div class="setting-desc">Sesuaikan ukuran font</div>
                    </div>
                    <i class="fas fa-chevron-right setting-arrow"></i>
                </div>
            </div>
        </div>

        <!-- Others -->
        <div class="settings-section">
            <h3 class="section-title">Lainnya</h3>
            <div class="settings-list">
                <div class="setting-item" onclick="location.href='tentang-aplikasi-hadistku.html'">
                    <div class="setting-icon">
                        <i class="fas fa-info-circle"></i>
                    </div>
                    <div class="setting-info">
                        <div class="setting-title">Tentang Website</div>
                        <div class="setting-desc">Versi dan informasi website Hadistku</div>
                    </div>
                    <i class="fas fa-chevron-right setting-arrow"></i>
                </div>

                <div class="setting-item" onclick="location.href='pusat-bantuan-hadistku.html'">
                    <div class="setting-icon">
                        <i class="fas fa-question-circle"></i>
                    </div>
                    <div class="setting-info">
                        <div class="setting-title">Pusat Bantuan</div>
                        <div class="setting-desc">Panduan penggunaan aplikasi</div>
                    </div>
                    <i class="fas fa-chevron-right setting-arrow"></i>
                </div>

                <div class="setting-item" onclick="location.href='dukungan-hadistkuweb.html'">
                    <div class="setting-icon">
                        <i class="fas fa-hands-helping"></i>
                    </div>
                    <div class="setting-info">
                        <div class="setting-title">Dukung Pengembangan Hadistku</div>
                        <div class="setting-desc">Donasi pengembangan Website</div>
                    </div>
                    <i class="fas fa-chevron-right setting-arrow"></i>
                </div>
                
                <div class="setting-item" onclick="location.href='https://portofoliorizky.vercel.app'">
                    <div class="setting-icon">
                        <i class="fas fa-code"></i>
                    </div>
                    <div class="setting-info">
                        <div class="setting-title">Developer</div>
                    </div>
                    <i class="fas fa-chevron-right setting-arrow"></i>
                </div>
            </div>
        </div>

        <!-- Logout Button -->
        <button class="logout-btn" id="logoutBtn">
            <i class="fas fa-sign-out-alt"></i> Keluar
        </button>
    </main>
    
    <div class="copyright">
        <p>&copy; <span id="year"></span> Rizky Mustafa Afrino.<br>Hadistku All rights reserved.</p>
    </div>

    <!-- Bottom Navigation -->
    <nav class="bottom-nav" id="bottomNav">
        <a href="index.html" class="nav-item">
            <i class="fas fa-home"></i>
            <span>Beranda</span>
        </a>
        <a href="kitab-hadist.html" class="nav-item">
            <i class="fas fa-book"></i>
            <span>Kitab</span>
        </a>
        <a href="favorite-hadist.html" class="nav-item">
            <i class="fas fa-heart"></i>
            <span>Favorit</span>
        </a>
        <a href="profil-hadist.html" class="nav-item active">
            <i class="fas fa-user"></i>
            <span>Profil</span>
        </a>
    </nav>

    <!-- Edit Profile Modal -->
    <div class="modal" id="editProfileModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Edit Profil</h3>
                <button class="modal-close" id="closeEditProfile">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">Foto Profil</label>
                    <div class="upload-container">
                        <img src="https://ui-avatars.com/api/?name=User+Name&background=0d6e6e&color=fff&size=128" 
                             alt="Profile Preview" 
                             class="avatar-preview" 
                             id="modalAvatar">
                        <label for="avatarUpload" class="upload-btn">
                            <i class="fas fa-camera"></i> Pilih Foto
                        </label>
                        <input type="file" id="avatarUpload" class="hidden-file-input" accept="image/*">
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label">Nama Lengkap</label>
                    <input type="text" class="form-control" id="editName" placeholder="Masukkan nama lengkap">
                </div>
                <div class="form-group">
                    <label class="form-label">Email</label>
                    <input type="email" class="form-control" id="editEmail" placeholder="Masukkan alamat email">
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" id="cancelEditProfile">Batal</button>
                <button class="btn btn-primary" id="saveProfile">Simpan Perubahan</button>
            </div>
        </div>
    </div>

    <!-- Crop Photo Modal -->
    <div class="modal" id="cropPhotoModal">
        <div class="modal-content" style="max-width: 90%;">
            <div class="modal-header">
                <h3 class="modal-title">Potong Foto Profil</h3>
                <button class="modal-close" id="closeCropModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="cropper-container">
                    <img id="imageToCrop" style="max-width: 100%;">
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" id="cancelCrop">Batal</button>
                <button class="btn btn-primary" id="saveCrop">Simpan</button>
            </div>
        </div>
    </div>

    <!-- Language Modal -->
    <div class="modal" id="languageModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Pilih Bahasa</h3>
                <button class="modal-close" id="closeLanguageModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="setting-item">
                    <div class="setting-info">
                        <div class="setting-title">Oops, fitur ini masih dalam tahap pengembangan! ðŸ˜… Kami lagi kerja keras buat memastikan semuanya berjalan lancar dan sesuai ekspektasi. Stay tuned ya, nanti kalau sudah siap, pasti bakal lebih keren!</div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary" id="saveLanguage">Keluar</button>
            </div>
        </div>
    </div>

    <!-- Font Size Modal -->
    <div class="modal" id="fontModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Ukuran Teks</h3>
                <button class="modal-close" id="closeFontModal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">Ukuran Font</label>
                    <input type="range" min="14" max="22" value="16" class="form-control" id="fontSizeSlider">
                    <div style="display: flex; justify-content: space-between; margin-top: 5px;">
                        <span style="font-size: 0.8rem;">Kecil</span>
                        <span style="font-size: 0.8rem;">Sedang</span>
                        <span style="font-size: 0.8rem;">Besar</span>
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label">Preview</label>
                    <div style="padding: 15px; border: 1px solid rgba(0,0,0,0.1); border-radius: 8px; font-size: 16px;" id="fontPreview">
                        <p>Ini adalah contoh teks untuk melihat ukuran font yang dipilih.</p>
                        <p class="arabic" style="font-family: 'Amiri', serif; text-align: right; direction: rtl;">Ù‡Ø°Ø§ Ù…Ø«Ø§Ù„ Ù„Ù†Øµ Ø§Ù„Ø¹Ø±Ø¨ÙŠ</p>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" id="cancelFontModal">Batal</button>
                <button class="btn btn-primary" id="saveFontSize">Simpan</button>
            </div>
        </div>
    </div>

    <!-- Logout Confirm Modal -->
    <div class="modal" id="logoutModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Konfirmasi Keluar</h3>
                <button class="modal-close" id="closeLogoutModal">&times;</button>
            </div>
            <div class="modal-body">
                  <p>Yakin mau keluar dari halaman ini? ðŸ˜¢ Kalau iya, pastikan kamu sudah selesai eksplor semua fitur yang ada! Tapi kalau masih ada yang perlu dicari atau dicoba, tetap stay dan nikmati pengalaman lebih dulu. Pilihan ada di tanganmu!</p>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" id="cancelLogout">Batal</button>
                <button class="btn btn-primary" id="confirmLogout">Keluar</button>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.12/cropper.min.js"></script>
    <script>
        // DOM Elements
        const themeToggle = document.getElementById('themeToggle');
        const darkModeToggle = document.getElementById('darkModeToggle');
        const notifToggle = document.getElementById('notifToggle');
        const logoutBtn = document.getElementById('logoutBtn');
        
        // Modal Elements
        const editProfileModal = document.getElementById('editProfileModal');
        const cropPhotoModal = document.getElementById('cropPhotoModal');
        const languageModal = document.getElementById('languageModal');
        const fontModal = document.getElementById('fontModal');
        const logoutModal = document.getElementById('logoutModal');
        
        // Buttons
        const editProfileBtn = document.getElementById('editProfileBtn');
        const languageSetting = document.getElementById('languageSetting');
        const fontSetting = document.getElementById('fontSetting');
        
        // Close buttons
        const closeEditProfile = document.getElementById('closeEditProfile');
        const closeCropModal = document.getElementById('closeCropModal');
        const closeLanguageModal = document.getElementById('closeLanguageModal');
        const closeFontModal = document.getElementById('closeFontModal');
        const closeLogoutModal = document.getElementById('closeLogoutModal');
        
        // Cancel buttons
        const cancelEditProfile = document.getElementById('cancelEditProfile');
        const cancelCrop = document.getElementById('cancelCrop');
        const cancelFontModal = document.getElementById('cancelFontModal');
        const cancelLogout = document.getElementById('cancelLogout');
        
        // Save buttons
        const saveProfile = document.getElementById('saveProfile');
        const saveCrop = document.getElementById('saveCrop');
        const saveLanguage = document.getElementById('saveLanguage');
        const saveFontSize = document.getElementById('saveFontSize');
        const confirmLogout = document.getElementById('confirmLogout');
        
        // Form elements
        const profileName = document.getElementById('profileName');
        const profileEmail = document.getElementById('profileEmail');
        const profileAvatar = document.getElementById('profileAvatar');
        const editName = document.getElementById('editName');
        const editEmail = document.getElementById('editEmail');
        const modalAvatar = document.getElementById('modalAvatar');
        const avatarUpload = document.getElementById('avatarUpload');
        const imageToCrop = document.getElementById('imageToCrop');
        const fontSizeSlider = document.getElementById('fontSizeSlider');
        const fontPreview = document.getElementById('fontPreview');

        // Cropper instance
        let cropper;

        // Check for saved theme preference
        if (localStorage.getItem('theme') === 'dark') {
            document.body.classList.add('dark-mode');
            themeToggle.innerHTML = '<i class="fas fa-sun"></i>';
            darkModeToggle.checked = true;
        }

        // Load profile data from localStorage
        function loadProfileData() {
            const savedName = localStorage.getItem('profileName');
            const savedEmail = localStorage.getItem('profileEmail');
            const savedPhoto = localStorage.getItem('profilePhoto');
            
            if (savedName) {
                profileName.textContent = savedName;
                editName.value = savedName;
            }
            
            if (savedEmail) {
                profileEmail.textContent = savedEmail;
                editEmail.value = savedEmail;
            }
            
            if (savedPhoto) {
                profileAvatar.src = savedPhoto;
                modalAvatar.src = savedPhoto;
            }
        }

        // Theme toggle for header button
        themeToggle.addEventListener('click', function() {
            document.body.classList.toggle('dark-mode');
            
            if (document.body.classList.contains('dark-mode')) {
                localStorage.setItem('theme', 'dark');
                themeToggle.innerHTML = '<i class="fas fa-sun"></i>';
                darkModeToggle.checked = true;
            } else {
                localStorage.setItem('theme', 'light');
                themeToggle.innerHTML = '<i class="fas fa-moon"></i>';
                darkModeToggle.checked = false;
            }
        });

        // Theme toggle for settings switch
        darkModeToggle.addEventListener('change', function() {
            document.body.classList.toggle('dark-mode', this.checked);
            
            if (this.checked) {
                localStorage.setItem('theme', 'dark');
                themeToggle.innerHTML = '<i class="fas fa-sun"></i>';
            } else {
                localStorage.setItem('theme', 'light');
                themeToggle.innerHTML = '<i class="fas fa-moon"></i>';
            }
        });

        // Notification toggle
        notifToggle.addEventListener('change', function() {
            if (this.checked) {
                alert('Notifikasi harian diaktifkan');
            } else {
                alert('Notifikasi harian dinonaktifkan');
            }
        });

        // Modal functions
        function openModal(modal) {
            modal.style.display = 'flex';
            document.body.style.overflow = 'hidden';
        }

        function closeModal(modal) {
            modal.style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        // Event listeners for modals
        editProfileBtn.addEventListener('click', () => {
            loadProfileData();
            openModal(editProfileModal);
        });
        
        languageSetting.addEventListener('click', () => openModal(languageModal));
        fontSetting.addEventListener('click', () => openModal(fontModal));
        logoutBtn.addEventListener('click', () => openModal(logoutModal));

        // Close modal events
        closeEditProfile.addEventListener('click', () => closeModal(editProfileModal));
        closeCropModal.addEventListener('click', () => {
            closeModal(cropPhotoModal);
            openModal(editProfileModal);
            if (cropper) {
                cropper.destroy();
            }
        });
        closeLanguageModal.addEventListener('click', () => closeModal(languageModal));
        closeFontModal.addEventListener('click', () => closeModal(fontModal));
        closeLogoutModal.addEventListener('click', () => closeModal(logoutModal));

        // Cancel buttons
        cancelEditProfile.addEventListener('click', () => closeModal(editProfileModal));
        cancelCrop.addEventListener('click', () => {
            closeModal(cropPhotoModal);
            openModal(editProfileModal);
            if (cropper) {
                cropper.destroy();
            }
        });
        cancelFontModal.addEventListener('click', () => closeModal(fontModal));
        cancelLogout.addEventListener('click', () => closeModal(logoutModal));

        // Handle profile photo upload
        avatarUpload.addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (file) {
                if (!file.type.match('image.*')) {
                    alert('Hanya file gambar yang diperbolehkan');
                    return;
                }
                
                const reader = new FileReader();
                
                reader.onload = function(e) {
                    // Tampilkan modal crop
                    imageToCrop.src = e.target.result;
                    
                    // Tutup modal edit profil sementara
                    closeModal(editProfileModal);
                    openModal(cropPhotoModal);
                    
                    // Inisialisasi cropper
                    if (cropper) {
                        cropper.destroy();
                    }
                    
                    cropper = new Cropper(imageToCrop, {
                        aspectRatio: 1,
                        viewMode: 1,
                        autoCropArea: 0.8,
                        responsive: true,
                        guides: false
                    });
                }
                
                reader.readAsDataURL(file);
            }
        });

        // Save cropped image
        saveCrop.addEventListener('click', function() {
            if (cropper) {
                // Dapatkan gambar yang sudah dipotong
                const canvas = cropper.getCroppedCanvas({
                    width: 300,
                    height: 300,
                    minWidth: 100,
                    minHeight: 100,
                    maxWidth: 1000,
                    maxHeight: 1000,
                    fillColor: '#fff',
                    imageSmoothingEnabled: true,
                    imageSmoothingQuality: 'high',
                });
                
                // Konversi ke base64 dan update foto profil
                const croppedImage = canvas.toDataURL('image/jpeg');
                modalAvatar.src = croppedImage;
                profileAvatar.src = croppedImage;
                localStorage.setItem('profilePhoto', croppedImage);
                
                // Tutup modal crop dan buka kembali modal edit profil
                closeModal(cropPhotoModal);
                openModal(editProfileModal);
                
                // Hancurkan cropper
                cropper.destroy();
            }
        });

        // Validate profile form
        function validateProfileForm() {
            const name = editName.value.trim();
            const email = editEmail.value.trim();
            
            if (!name) {
                alert('Nama lengkap tidak boleh kosong');
                return false;
            }
            
            if (!email) {
                alert('Alamat email tidak boleh kosong');
                return false;
            }
            
            if (!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(email)) {
                alert('Format email tidak valid');
                return false;
            }
            
            return true;
        }

        // Save profile
        saveProfile.addEventListener('click', function() {
            if (validateProfileForm()) {
                const newName = editName.value;
                const newEmail = editEmail.value;
                
                // Update tampilan
                profileName.textContent = newName;
                profileEmail.textContent = newEmail;
                
                // Simpan ke localStorage
                localStorage.setItem('profileName', newName);
                localStorage.setItem('profileEmail', newEmail);
                
                closeModal(editProfileModal);
                alert('Profil berhasil diperbarui');
            }
        });

        // Save language
        saveLanguage.addEventListener('click', function() {
            alert('Horee, Berhasil Keluar');
            closeModal(languageModal);
        });

        // Font size preview
        fontSizeSlider.addEventListener('input', function() {
            const size = this.value;
            fontPreview.style.fontSize = `${size}px`;
        });

        // Save font size
        saveFontSize.addEventListener('click', function() {
            const selectedSize = fontSizeSlider.value;
            localStorage.setItem('fontSize', selectedSize);
            alert('Ukuran teks berhasil disimpan');
            closeModal(fontModal);
        });

        // Logout confirmation
        confirmLogout.addEventListener('click', function() {
            alert('Wlee, Kamu belum bisa keluar karena masih versi beta! Tapi santai, kita bakal terus update dan kembangkan fitur baru yang lebih keren buat versi berikutnya. Nikmati dulu yang ada, ya, dan siap-siap untuk sesuatu yang lebih kece di masa depan! ðŸš€âœ¨"  ');
            closeModal(logoutModal);
            // Redirect to login page
            window.location.href = 'profil-hadist.html';
        });

        // Bottom nav active state
        document.querySelectorAll('.nav-item').forEach(item => {
            item.addEventListener('click', function(e) {
                e.preventDefault();
                document.querySelectorAll('.nav-item').forEach(nav => nav.classList.remove('active'));
                this.classList.add('active');
                
                const target = this.getAttribute('href');
                if (target && target !== '#') {
                    window.location.href = target;
                }
            });
        });

        // Load saved font size
        if (localStorage.getItem('fontSize')) {
            const savedSize = localStorage.getItem('fontSize');
            fontSizeSlider.value = savedSize;
            fontPreview.style.fontSize = `${savedSize}px`;
        }

        // Set copyright year
        document.getElementById('year').textContent = new Date().getFullYear();

        // Hide bottom nav on scroll down
        let lastScroll = 0;
        const bottomNav = document.getElementById('bottomNav');
        
        window.addEventListener('scroll', function() {
            const currentScroll = window.pageYOffset;
            
            if (currentScroll > lastScroll && currentScroll > 100) {
                // Scroll down
                bottomNav.classList.add('hidden');
            } else {
                // Scroll up
                bottomNav.classList.remove('hidden');
            }
            lastScroll = currentScroll;
        });

        // Drag and drop for profile photo
        const uploadContainer = document.querySelector('.upload-container');

        // Highlight saat file di drag over
        ['dragenter', 'dragover'].forEach(eventName => {
            uploadContainer.addEventListener(eventName, highlight, false);
        });

        ['dragleave', 'drop'].forEach(eventName => {
            uploadContainer.addEventListener(eventName, unhighlight, false);
        });

        function highlight(e) {
            e.preventDefault();
            e.stopPropagation();
            uploadContainer.style.border = '2px dashed var(--primary)';
            uploadContainer.style.backgroundColor = 'var(--primary-light)';
        }

        function unhighlight(e) {
            e.preventDefault();
            e.stopPropagation();
            uploadContainer.style.border = 'none';
            uploadContainer.style.backgroundColor = 'transparent';
        }

        // Handle drop
        uploadContainer.addEventListener('drop', function(e) {
            e.preventDefault();
            e.stopPropagation();
            
            const dt = e.dataTransfer;
            const file = dt.files[0];
            
            if (file && file.type.match('image.*')) {
                const reader = new FileReader();
                
                reader.onload = function(e) {
                    // Tampilkan modal crop
                    imageToCrop.src = e.target.result;
                    
                    closeModal(editProfileModal);
                    openModal(cropPhotoModal);
                    
                    if (cropper) {
                        cropper.destroy();
                    }
                    
                    cropper = new Cropper(imageToCrop, {
                        aspectRatio: 1,
                        viewMode: 1,
                        autoCropArea: 0.8,
                        responsive: true,
                        guides: false
                    });
                }
                
                reader.readAsDataURL(file);
            } else {
                alert('Hanya file gambar yang diperbolehkan');
            }
        });

        // Load profile data when page loads
        document.addEventListener('DOMContentLoaded', function() {
            loadProfileData();
        });
    </script>
</body>
</html>